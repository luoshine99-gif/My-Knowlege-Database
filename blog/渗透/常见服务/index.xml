<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>常见服务 on mrlxl的知识库</title>
    <link>https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/</link>
    <description>Recent content in 常见服务 on mrlxl的知识库</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Mon, 26 Jan 2026 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>关于electron XSS2RCE的研究</title>
      <link>https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/%E5%85%B3%E4%BA%8Eelectron-xss2rce%E7%9A%84%E7%A0%94%E7%A9%B6/</link>
      <pubDate>Mon, 26 Jan 2026 00:00:00 +0800</pubDate>
      <guid>https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/%E5%85%B3%E4%BA%8Eelectron-xss2rce%E7%9A%84%E7%A0%94%E7%A9%B6/</guid>
      <description>&lt;h1 id=&#34;关于electron-xss2rce的研究&#34;&gt;关于electron XSS2RCE的研究&lt;/h1&gt;&#xA;&lt;p&gt;每次听见XSS2RCE，第一反应都是：客户端？electron？不过一直是知其然不知其所以然，于是现在来仔细了解一下其中的原理&lt;/p&gt;&#xA;&lt;h2 id=&#34;多进程通信&#34;&gt;多进程通信&lt;/h2&gt;&#xA;&lt;p&gt;Electron采用多进程架构，有两种进程：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;主进程（Main Process）：拥有完整系统权限，负责窗口管理、原生API调用，它运行在Node.js环境中,拥有完整的系统访问权限,可以执行任意系统命令、访问文件系统&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;渲染进程（Renderer Process）：基于Chromium的网页环境，处理UI渲染，只有受限的权限&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;两者通过IPC（进程间通信） 机制交互，但默认配置下，这种通信缺乏严格的权限校验&lt;/p&gt;&#xA;&lt;p&gt;到这里，我们其实可以简单理解其架构为浏览器内核+Node.js&lt;/p&gt;&#xA;&lt;h2 id=&#34;安全配置项&#34;&gt;安全配置项&lt;/h2&gt;&#xA;&lt;p&gt;一些错误的配置会导致漏洞风险的增加：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;nodeIntegration: true&lt;/code&gt;：直接在渲染进程中启用Node.js环境，即让渲染进程里的网页代码可以直接使用完整的 Node.js 环境，包括对文件、操作系统的控制功能&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;contextIsolation: false&lt;/code&gt;：关闭上下文隔离，preload 脚本、网页脚本、Electron 内部扩展共享同一个 V8 全局上下文，互相可见可调用&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;code&gt;enableRemoteModule: true&lt;/code&gt;：该机制允许渲染进程通过 remote 调用主进程能力，已被官方明确标记为不推荐使用，并在新版本中逐步弃用&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;xss到rce的利用&#34;&gt;XSS到RCE的利用&lt;/h2&gt;&#xA;&lt;p&gt;我们到这里已经大致能想到攻击链路了，即通过在渲染进程触发XSS，并尝试通过XSS来控制Node API，实现对系统的访问控制&lt;/p&gt;&#xA;&lt;p&gt;我写了一个markdown文本编辑器来模拟electron应用，用户可以输入md语法格式的文本：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20260126165859953.png&#34; alt=&#34;image-20260126165859953&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;点击preview可以预览解析md后的文本样式：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20260126165940071.png&#34; alt=&#34;image-20260126165940071&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;最理想的情况&#34;&gt;最理想的情况&lt;/h3&gt;&#xA;&lt;p&gt;我在代码开启了危险配置：&#xA;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769418012383.png&#34; alt=&#34;QQ_1769418012383&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;由于这两个条件均开启，页面 JS 可以直接调用 Node.js 的 require，此时可以利用&lt;code&gt;child_process&lt;/code&gt; 模块执行系统命令，实现 RCE，这里选择弹计算器的payload：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onerror&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;require(&amp;#39;child_process&amp;#39;).exec(&amp;#39;open -a Calculator&amp;#39;)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769418059914.png&#34; alt=&#34;QQ_1769418059914&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;点击预览，可以看到这里成功触发了XXS2RCE：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769418078357.png&#34; alt=&#34;QQ_1769418078357&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;关闭nodeintegration&#34;&gt;关闭nodeIntegration&lt;/h3&gt;&#xA;&lt;p&gt;接下来是关闭nodeIntegration的情况：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769418228221.png&#34; alt=&#34;QQ_1769418228221&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;利用方法会比较苛刻一点，我们可以利用暴露的IPC接口，例如我在代码做了如下实现：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769418948547.png&#34; alt=&#34;QQ_1769418948547&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以看到这里有一个用于读文件的IPC，而这个IPC又被暴露了出来：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769419367857.png&#34; alt=&#34;QQ_1769419367857&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;那么我们可以通过XSS发送构造好的IPC消息来读文件，这里payload选择读取&lt;code&gt;/etc/passwd&lt;/code&gt;文件：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;display:none&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onerror&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ipcRenderer.send(&amp;#39;read-file&amp;#39;, &amp;#39;/etc/passwd&amp;#39;)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769419123387.png&#34; alt=&#34;QQ_1769419123387&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;此时点击预览就会触发XSS，实现读文件操作：&#xA;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769419234077.png&#34; alt=&#34;QQ_1769419234077&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;启用contextisolation&#34;&gt;启用contextIsolation&lt;/h3&gt;&#xA;&lt;p&gt;在此基础上，如果启用了contextIsolation呢？事实上，如果关闭了 sandbox 并且 Preload 脚本写得不安全，也会存在安全风险：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/QQ_1769419970024.png&#34; alt=&#34;QQ_1769419970024&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>内网常见服务的漏洞总结</title>
      <link>https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/%E5%86%85%E7%BD%91%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://yuy0ung.github.io/blog/%E6%B8%97%E9%80%8F/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/%E5%86%85%E7%BD%91%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;h1 id=&#34;内网常见服务的漏洞总结&#34;&gt;内网常见服务的漏洞总结&lt;/h1&gt;&#xA;&lt;p&gt;由于6s6师傅在面试杭州某60时被拷打了很多内网常见服务的漏洞，我觉得还是得上手实操并总结一下，于是有了这篇笔记&lt;/p&gt;&#xA;&lt;h2 id=&#34;xxl-job&#34;&gt;XXL-JOB&lt;/h2&gt;&#xA;&lt;h3 id=&#34;介绍&#34;&gt;介绍&lt;/h3&gt;&#xA;&lt;p&gt;xxl-job是一个分布式任务调度平台，有两个核心模块：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;调度中心admin，默认端口8080，负责管理调度信息等操作&lt;/li&gt;&#xA;&lt;li&gt;执行器executor，默认端口9999，负责任务执行，接收调度中心的请求&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;特征&#34;&gt;特征&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;fofa语法：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;icon_hash=&amp;#34;1691956220&amp;#34; || app=&amp;#34;xxl-job&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;页面特征：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611215458025-20250611215550786.png&#34; alt=&#34;image-20250611215458025&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;图标特征：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611220029659.png&#34; alt=&#34;image-20250611220029659&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;常见漏洞&#34;&gt;常见漏洞&lt;/h3&gt;&#xA;&lt;h4 id=&#34;弱口令&#34;&gt;弱口令&lt;/h4&gt;&#xA;&lt;p&gt;xxl-job的初始化sql语句设定了默认密码admin/123456，并且登录后不会提示修改默认密码&lt;/p&gt;&#xA;&lt;p&gt;这样可以直接进入后台：&#xA;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611220409437.png&#34; alt=&#34;image-20250611220409437&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;后台计划任务getshell&#34;&gt;后台计划任务getshell&lt;/h4&gt;&#xA;&lt;p&gt;登录成功后可以在任务管理处创建计划任务：&#xA;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611223806800.png&#34; alt=&#34;image-20250611223806800&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;在GLUEIDE处编辑命令：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611221340746.png&#34; alt=&#34;image-20250611221340746&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;写入反弹shell的命令：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611225813793.png&#34; alt=&#34;image-20250611225813793&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后回到管理页面选择执行一次：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611225925963.png&#34; alt=&#34;image-20250611225925963&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;即可反弹shell：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250611225755506.png&#34; alt=&#34;image-20250611225755506&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;executor-restful-api未授权访问rce&#34;&gt;Executor Restful API未授权访问RCE&lt;/h4&gt;&#xA;&lt;p&gt;前面提到了xxl-job分为admin和executor，而executor默认没有配置认证，未授权的攻击者可以通过RESTful API执行任意命令&lt;/p&gt;&#xA;&lt;h4 id=&#34;默认accesstoken身份绕过&#34;&gt;默认accessToken身份绕过&lt;/h4&gt;&#xA;&lt;p&gt;也是一个很经典的漏洞场景，accessToken是为了修复XXL-JOB Executor Restful  API  未授权访问命令执行漏洞，为了防止其未授权添加了accessToken校验，但是很多人在使用该框架的时候并未修改其默认的值xxl.job.accessToken=default_token，所以只需要在请求头中添加XXL-JOB-ACCESS-TOKEN: default_token 即可绕过身份校验&lt;/p&gt;&#xA;&lt;h4 id=&#34;api未授权hessian2反序列化&#34;&gt;api未授权Hessian2反序列化&lt;/h4&gt;&#xA;&lt;p&gt;即xxl-job的/api路由可以未授权访问，而该接口会进行Hessian2反序列化操作，可以利用Hessian2反序列化漏洞进行RCE&lt;/p&gt;&#xA;&lt;p&gt;未授权情况的API界面如下&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250613181450970.png&#34; alt=&#34;image-20250613181450970&#34;&gt;一把梭命令执行：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250613181726725.png&#34; alt=&#34;image-20250613181726725&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;nacos&#34;&gt;Nacos&lt;/h2&gt;&#xA;&lt;h3 id=&#34;介绍-1&#34;&gt;介绍&lt;/h3&gt;&#xA;&lt;p&gt;Nacos是一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台，由阿里巴巴开源，一般在内网系统中比较常见&lt;/p&gt;&#xA;&lt;p&gt;nacos部署需要开放以下端口：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;主端口：默认8848，管理页面的主入口&lt;/li&gt;&#xA;&lt;li&gt;gRPC服务客户端端口：默认9848，用于客户端向服务端发起gRPC连接和请求&lt;/li&gt;&#xA;&lt;li&gt;gRPC服务服务端端口：默认9849，用于服务间的数据同步和其他服务端之间的通信&lt;/li&gt;&#xA;&lt;li&gt;Jraft请求服务端端口：默认为7848，用于处理服务端间的Raft相关请求，比如集群管理中的选主和日志复制等&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;特征-1&#34;&gt;特征&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;fofa语法：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;app=&amp;#34;nacos&amp;#34; &amp;amp;&amp;amp; port=&amp;#34;8848&amp;#34; || icon_hash=&amp;#34;13942501&amp;#34;||icon_hash=&amp;#34;1227052603&amp;#34; &amp;amp;&amp;amp; port=&amp;#34;8848&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;页面特征：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20250614171327260.png&#34; alt=&#34;image-20250614171327260&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;图标特征：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
