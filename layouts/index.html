{{ define "main" }}
<div class="container">
  {{ partial "sidebar-left.html" . }}
  <div class="content-center">
    <h1>{{ .Site.Title }}</h1>
    
    <!-- Render the tree again in the center for the homepage -->
    <div class="homepage-tree tree">
        {{ $blog := site.GetPage "/blog" }}
        {{ if not $blog }}
          {{ $blog = site.GetPage "blog" }}
        {{ end }}
    
        {{ if $blog }}
      {{ partial "tree.html" (dict "Page" $blog "ShowDate" true) }}
    {{ end }}
    </div>

    <div class="markdown-body">
      <!-- Only render content if this is NOT the homepage, or if the homepage explicitly has content in _index.md that isn't just a list -->
      {{ if not .IsHome }}
        {{ .Content }}
      {{ end }}
    </div>
    {{ partial "footer.html" . }}
  </div>
  <div class="sidebar-right">
    <!-- Empty for homepage -->
  </div>
</div>
{{ end }}
